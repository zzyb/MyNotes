# 物理数据模型 PDM

​	**物理数据模型（PDM）**可以帮助你<u>分析表，视图和其他数据库对象</u>，包括数 据仓库的多维对象。PDM 的是更具体的一个概念（CDM）或逻辑（LDM）的数据 模型。你可以为所有常用的 DBMS 建模、反向工程、生成数据库。

​	PDM <u>叙述数据库的物理实现</u>。主要目的是把 CDM 中建立的现实世界模型生成 特定的 DBMS 脚本，产生数据库中保存信息的储存结构，保证数据在数据库中的完整性和一致性。



## 一、组成元素与说明

### 1.1 表

### 1.2 视图

### 1.3 主键、外键、候选键

​	键主要包括候选键(Alternate Key)、主键(Primary Key)和外健(Foreign Key)，分 别简记为,和。

​	表中用于唯一标识每一条记录的一个或几个列的组 合，称为表的**候选键**（候选键具有充当主键的资格，只是没 有被选做主键。它为数据访问提供了方便，调整了数据的可用性。），选定其中的一个作为表的**主键**。一个表中的候选键可以 有多个，但主键只能有一个。

​	主键用于维护表的实体完整性，而**外键**则用于维 护表的参照完整性。

### 1.4 存储过程与函数

​	存储过程是**采用 SQL 及流程控制语句编写的完成某种业务的脚本**。存储过 程在数据处理上具有处理速度快、处理灵活等优点。 但是，存储过程极大地增 加了与数据库之间的耦合，在数据库迁移时，需要重写存储过程，从而增加了 版本维护的工作量。

### 1.5 触发器

​	触发器在**维护数据完整性起着重要作用**，它比参照更具灵活性， 也能实现 三层结构中数据层的业务规则。<u>当对一个表进行操作（ insert，delete， update）时就会激活它执行</u>。

注意：异构数据库存中，存储过程和触发器不兼容，移植性不好。

### 1.6 索引

​	索引（Index） 索引是**优化查询时采用一种数据库技术**，索引有<u>簇索引、唯 一索引、主键索引、外键索引、候选键索引</u>。索引是一个与表有关的数据结 构，它是通过索引列（单个或多个）进行逻辑排序的。索引可以改进系统的性 能，消除查找到记录之前在表中的多次扫描。索引的存在减慢了数据的修改 （插入、修改、删除）速度。

应用原则：读数据之前通过脚本加上索引，读数之后删除索引。

### 1.7 约束

​	共包括五种约束：**唯一性和主键约束、外键约束、检查约束、空值约束、 默认值约束**， 有五大关键词，UNIQUE 和 Primary Key, Foreign Key, CHECK, NOT  NULL, DEFAULT。

### 1.8 定义域

​	简单地说，是**用户自定义类型，但域还可以定义它的取值范围或默认值， 采用域减少了维护字段类型的工作量，也减少数据的不一致性**。

### 1.9 序列 SEQUENCE

序列就像**一个高级形式的自动递增列。可以定义每次增长的**。

```sql
CREATE SEQUENCE 序列名 [INCREMENT BY n]  
[START WITH n] 
[{MAXVALUE/ MINVALUE n|NOMAXVALUE}] 
[{CYCLE|NOCYCLE}] 
[{CACHE n|NOCACHE}];  
```



INCREMENT BY 用于定义序列的步长，如果省略，则默认为 1，如果出现负值， 则代表序列的值是按照此步长递减的。 

START WITH 定义序列的初始值(即产生的第一个值)，默认为 1。 

MAXVALUE 定义序列生成器能产生的最大值。 选项 NOMAXVALUE 是默认选项，代表没有最大值定义，这时对于递增序列，系 统能够产生的最大值是 10 的 27 次方;对于递减序列，最大值是-1。 

MINVALUE 定义序列生成器能产生的最小值。

### 1.10 参照/引用

**引用**是在<u>父表和子表间建立一种关系</u>。

引用定义引用一致完整性约束在列之间，可以是主键、外键或者是替代 主键。

引用最常见的是在主键上。



## 二、创建步骤

### 2.1 定义表

### 2.2 定义视图

### 2.3 定义列

### 2.4 定义索引

- 聚簇索引（C）

​	聚簇索引是一种<u>对磁盘上实际数据重新组织以按指定的一个或多个列的值 排序</u>。由于聚簇索引的索引页面指针指向数据页面，所以使用聚簇索引查 找数据几乎总是比使用非聚簇索引快。每张表只能建一个聚簇索引，并且 建聚簇索引需要至少相当该表 120%的附加空间，以存放该表的副本和索引 中间页。

- 非聚簇索引
  - 唯一索引（U）
  - 主键索引（P）
  - 外键索引（F）
  - 候选键索引（A）

```sql
CREATE INDEX INDEX_NAME ON TABLE_NAME (
 COL_NAME ASC
);
```

### 2.5 定义约束

### 2.6 定义存储过程与函数



## 三、生成数据库文件

![image-20220427140108563](D:\zyb\project\MyNotes\docs\数据仓库\PowerDesigner\PowerDesigner物理数据模型.resource\image-20220427140108563.png)

![image-20220427140225298](D:\zyb\project\MyNotes\docs\数据仓库\PowerDesigner\PowerDesigner物理数据模型.resource\image-20220427140225298.png)

![image-20220427140422333](D:\zyb\project\MyNotes\docs\数据仓库\PowerDesigner\PowerDesigner物理数据模型.resource\image-20220427140422333.png)
